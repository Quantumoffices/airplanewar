{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\hero.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport App from \"./app\";\r\nimport Bullet from \"./bullet\";\r\nimport Main from \"./main\";\r\n\r\n@ccclass\r\nexport default class Hero extends cc.Component {\r\n    //子弹pfb\r\n    @property(cc.Prefab)\r\n    pfb_bullet1: cc.Prefab = null;\r\n\r\n    //子弹发射声音\r\n    @property(cc.AudioClip)\r\n    audio_bullet: cc.AudioClip = null;\r\n\r\n     //飞机被毁声音\r\n     @property(cc.AudioClip)\r\n     audio_hero_blowup: cc.AudioClip = null;\r\n\r\n    //水平速度\r\n    //   private hv = 0;\r\n    //水平加速度\r\n    //   private ahV=0.5;\r\n    onLoad() {\r\n        // cc.log(\"生成子弹池\");\r\n        App.Instance.AddTypePool(\"Bullet1\", 50, this.pfb_bullet1);\r\n    }\r\n\r\n    start() {\r\n        // this.node.on(cc.Node.EventType.TOUCH_MOVE, this.dragMove, this);\r\n    }\r\n\r\n    //移动处理\r\n    // private dragMove(e): void {\r\n    //     var locationv = e.getLocation();\r\n    //     var location = this.node.parent.convertToNodeSpaceAR(locationv);\r\n    //     //飞机不移出屏幕 \r\n    //     var minX = -this.node.parent.width / 2 + this.node.width / 2;\r\n    //     var maxX = -minX;\r\n    //     var minY = -this.node.parent.height / 2 + this.node.height / 2;\r\n    //     var maxY = -minY;\r\n    //     if (location.x < minX) {\r\n    //         location.x = minX;\r\n    //     }\r\n    //     if (location.x > maxX) {\r\n    //         location.x = maxX;\r\n    //     }\r\n    //     if (location.y < minY) {\r\n    //         location.y = minY;\r\n    //     }\r\n    //     if (location.y > maxY) {\r\n    //         location.y = maxY;\r\n    //     }\r\n    //     this.node.setPosition(location);\r\n    // }\r\n\r\n    //单发\r\n    sigleFire(type: number) {\r\n        this.genBullet();\r\n    }\r\n    //连发\r\n    autoFire() {\r\n        this.schedule(this.genBullet, 0.1, cc.macro.REPEAT_FOREVER);\r\n    }\r\n    //停止发射\r\n    stopFire() {\r\n        this.unschedule(this.genBullet);\r\n    }\r\n\r\n    //生成子弹\r\n    genBullet() {\r\n        cc.audioEngine.play(this.audio_bullet,false,1);\r\n        // cc.log(\"生成子弹1\");\r\n        let bullet1 = App.Instance.GetNodeFromPool(\"Bullet1\");\r\n        this.node.parent.addChild(bullet1);\r\n        bullet1.setPosition(cc.v2(this.node.x, this.node.y + 20));\r\n        bullet1.getComponent(Bullet).fly();\r\n        // cc.log(\"bullet1 group=\",bullet1.group);\r\n    }\r\n\r\n    \r\n\r\n    //碰撞检测\r\n    onCollisionEnter(other, self) {\r\n        this.stopFire();\r\n        //停止碰撞检测\r\n        this.node.group=\"default\";\r\n        this.node.targetOff(this);\r\n\r\n        cc.log(\"碰撞到检测\");\r\n        cc.audioEngine.play(this.audio_hero_blowup,false,1);\r\n        var anim = this.node.getComponent(cc.Animation);\r\n        // 指定播放 test 动画\r\n        anim.play('hero_blowup');\r\n        anim.on('finished', ()=>{\r\n            this.node.destroy();\r\n            this.node.parent.getComponent(Main).gameOver();\r\n        }, this);\r\n\r\n        \r\n    }\r\n\r\n}\r\n"]}